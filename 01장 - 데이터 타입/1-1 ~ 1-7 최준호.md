# 데이터 타입

## 데이터 타입의 종류
- 자바스크립트의 데이터 타입에는 크게 기본형과 참조형이 있다.
- 기본형에는 숫자, 문자열, 불리언, null, undefined, 심볼이 있다.
- 참조형은 객체, 배열, 함수, 날짜, 정규표현식, Map, WeakMap, Set, WeakSet이 있다.

## 데이터 타입에 관한 배경지식

### 메모리와 데이터
- 컴퓨터는 모든 데이터를 0과 1로 저장하며, 0 또는 1만 표현할 수 있는 하나의 메모리 조각을 비트라고 한다.
- 메모리는 매우 많은 비트들로 구성돼 있는데, 각 비트는 고유한 식별자를 통해 위치를 확인할 수 있다.(0과 1로만 표현할 수 있는 비트 단위로 위치를 확인하는 것은 비효율적이다.)
- 매우 많은 비트를 한 단위로 묶으면 검색 시간을 줄일 수 있고 표현할 수 있는 데이터의 개수로 늘어나겠지만, 낭비되는 비트가 생길 수 있다.
- 자주 사용하지 않는 데이터를 표현하기 위해 빈 공간을 남겨놓기보다는 표현 가능한 개수에 어느 정도 제약이 따르더라도 크게 문제되지 않을 적정한 공간을 묶는 편이 나아 바이트라는 단위가 생겼다.
- 1바이트는 8개의 비트로 구성돼 있으며 1바이트는 총 256개의 값을 표현할 수 있다.
- 정적 타입 언어는 메모리 낭비를 최소화하기 위해 데이터 타입별로 할당할 메모리 영역을 2바이트, 4바이트 등으로 정했다.
- 모든 데이터는 바이트 단위의 식별자, 더 정확하게는 메모리 주솟값을 통해 서로 구분하고 연결할 수 있다.

### 식별자와 변수
- 변수는 '변할 수 있는 수'이다.
- 식별자는 어떤 데이터를 식별하는 데 사용하는 이름, 즉 변수명이다.

## 변수 선언과 데이터 할당

### 변수 선언
``` javascript
var a;
```
- 변할 수 있는 데이터를 만든다. 이 데이터의 식별자는 a로 한다.
- 변수란 변경 가능한 데이터가 담길 수 있는 공간 또는 그릇이다. 

### 데이터 할당
``` javascript
var a;
a = 'abc';

var a = 'abc';
```
- 데이터를 저장하기 위한 별도의 메모리 공간을 다시 확보해서 문자열 'abc'를 저장하고, 그 주소를 변수 영역에 저장하는 식으로 이루어진다.
- 변수 영역에 값을 직접 대입하지 않고 한 단계를 더 거치는 이유는 데이터 변환을 자유롭게 할 수 있게 함과 동시에 메모리를 효율적으로 관리하기 위함이다.
- 

## 기본형 데이터와 참조형 데이터

### 불변값
- 기본형 데이터는 모두 불변값이다.
- 바꿀 수 있으면 변수, 바꿀 수 없으면 상수이다.
- 변수와 상수를 구분 짓는 변경 가능성의 대상은 변수 영역 메모리이며 불변성 여부를 구분할 때의 변경 가능성의 대상은 데이터 영역 메모리이다.
``` javascript
var a = 'acb';
a = a + 'def';

var b = 5;
var c = 5;
b = 7;
```
- 변수 a에 문자열 'abc'를 할당했다가 뒤에 'def'를 추가하면 'abc'가 'abcdef'로 변하는 것이 아니라 새로운 문자열 'abcdef'를 만들어 그 주소를 a에 저장한다.
- 변수 b에서 컴퓨터는 데이터 영역에서 5를 찾고 없으면 데이터 공간을 만들어 5를 저장하고 그 주소를 b에 저장한다.
- 변수 c 역시 5를 찾고 변수 b에서 만들어진 5의 주소를 c에 저장한다.
- 변수 b는 5에서 7로 바꾸려하는데, 기존에 저장했던 7을 찾아 있으면 재활용하고 없으면 새로 만들어 b에 저장한다.
- 이처럼 한 번 만든 값을 변경할 수 없으며 새로 만드는 동작을 통해서만 변경이 이뤄지는 것이 불변값이다.

### 가변값(책 참조)
- 참조형 데이터는 가변값인 경우가 많지만, 설정에 따라 변경 불가능한 경우도 있고, 아예 불변값으로 활동하는 방안도 있다.
- 기본형 데이터와의 차이는 객체의 변수 영역이 별도로 존재한다는 점이다.

### 변수 복사 비교(책 참조)
``` javascript
var a = 10;
var b = a;
var obj1 = { c: 10, d: 'ddd' };
var obj2 = obj1;

b = 15;
obj2.c = 20;

// a !== b
// obj1 === obj2
```
- 위의 결과가 기본형과 참조형 데이터의 가장 큰 차이점이다.
- 대부분의 자바스크립트 책에서 '기본형은 값을 복사하고 참조형은 주솟값을 복사한다'고 설명하고 있지만, 사실은 어떤 데이터 타입이든 변수에 할당하기 위해서는 주솟값을 복사해야 하기 때문에, 엄밀히 따지면 자바스크립트의 모든 데이터는 참조형 데이터이다.
- 참조형 데이터가 가변값이라고 설명할 때의 가변은 참조형 데이터 자체를 변경할 경우가 아니라 그 내부의 프로퍼티를 변경할 때만 성립한다.

## 불변 객체

### 불변 객체를 만드는 간단한 방법
- 값으로 전달받은 객체에 변경을 가하더라도 원본 객체는 변하지 않아야 하는 경우 불변 객체가 필요하다.
- 새로운 객체를 만들어 반환하는 함수를 사용한다.

### 얕은 복사와 깊은 복사
- 얕은 복사는 바로 아래 단계의 값만 복사하는 방법이고, 깊은 복사는 내부의 모든 값들을 하나하나 찾아서 전부 복사하는 방법이다.

## undefined와 null
- undefined는 사용자가 명시적으로 지정할 수도 있지만, 값지 존재하지 않을 때 자바스크립트 엔진이 자동으로 부여하는 경우도 있다.
- 자바스크립트 엔진은 사용자가 응당 어떤 값을 지정할 것이라고 예상되는 상황임에도 실제로는 그렇게 하지 않았을 때 undefined를 반환한다.
    - 값을 대입하지 않은 변수, 즉 데이터 영역의 메모리 주소를 지정하지 않은 식별자에 접근할 때
    - 객체 내부의 존재하지 않는 프로퍼티에 접근할 때
    - return 문이 없거나 호출되지 않은 함수의 실행 결과
```javascript
var arr1 = [undefined, 1];
var arr2 = [];
arr2[1] = 1;

arr1.forEach(function(v, i) { console.log(v, i) }) // undefined 0 / 1 1

arr2.forEach(function(v, i) { console.log(v, i) }) // 1 1

...
```
- 사용자가 명시적으로 부여한 undefined는 비여있음을 의미하긴 하지만 하나의 값으로 동작하기 때문에 이때의 프로퍼티나 배열의 요소는 고유의 키값이 실존하게 된다.
- 자바스크립트 엔진이 반환해주는 undefined는 해당 프로퍼티 내지 배열의 키값 자체가 존재하지 않음을 의미한다.